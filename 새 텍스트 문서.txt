from urllib.request import urlopen
import sys
from bs4 import BeautifulSoup
set_commiters = set()

base_url = "https://github.com/tensorflow/tensorflow"
commits_url = "/commits/master"
plain_text = urlopen(base_url).read()
soup = BeautifulSoup(plain_text, 'html.parser')

def get_topics():
    topics = soup.select("#topics-list-container a")
    for topic in topics:
        print(topic.text)

def get_languages():
    langs = soup.select(".overall-summary.overall-summary-bottomless a .lang")
    for lang in langs:
        print(lang.text)

def get_percentage():
    percentages = soup.select(".overall-summary.overall-summary-bottomless a .percent")
    for percent in percentages:
        print(percent.text)

def get_commiters(page):
    plain_text_commits = urlopen(page).read()
    soup_commiter = BeautifulSoup(plain_text_commits, 'html.parser')
    commiters = soup_commiter.select(".AvatarStack.flex-self-start a")
    pages = soup_commiter.select(".paginate-container a")
    for commiter in commiters:
        set_commiters.add(commiter.get("href"))
    return pages[pages.__len__() - 1].get('href')

get_topics()
get_languages()
get_percentage()

next_page = get_commiters(base_url + commits_url)
for i in range(0,10):
    next_page = get_commiters(next_page)

print('중복제거한 총 커미터들 : ',set_commiters.__len__(),'명')
print(set_commiters)